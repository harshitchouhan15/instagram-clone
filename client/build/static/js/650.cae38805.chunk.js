"use strict";(self.webpackChunkshopping=self.webpackChunkshopping||[]).push([[650],{315:function(n,e,t){var i,o,r,s,c,d,a,l=t(168),u=t(3433),p=t(4165),x=t(5861),h=t(9439),f=t(3044),m=t(7488),v=t(6487),Z=t(7237),w=t(7229),g=t(2442),b=t(8720),k=t(1942),j=t(2791),y=t(3197),C=t(9434),I=t(6682),P=t(6338),z=t(2898),M=t(184);e.Z=function(n){var e,t=n.setFetch,i=n.fetch,o=n.item,r=n.muted,s=n.setIndex,c=n.setMuted,d=n.setOpen,a=n.setOpenComment,l=n.socket,v=n.index,T=n.id,U=(0,C.v9)((function(n){return n.user.currentUser})),L=(0,j.useState)([]),V=(0,h.Z)(L,2),q=V[0],A=V[1],D=(0,j.useState)(!1),G=(0,h.Z)(D,2),H=G[0],J=G[1],K=null===q||void 0===q?void 0:q.find((function(n){return n===U._id})),N=(0,C.v9)((function(n){return n.darkMode})),Q=(0,j.useRef)(null);(0,j.useEffect)((function(){var n={root:document.getElementById(T),rootMargin:"0px",threshold:.7},e=new IntersectionObserver((function(n){n.forEach((function(n){var e,t;n.isIntersecting?null===Q||void 0===Q||null===(e=Q.current)||void 0===e||e.play():(null!==Q&&void 0!==Q&&Q.current&&(Q.current.currentTime=0),null===Q||void 0===Q||null===(t=Q.current)||void 0===t||t.pause())}))}),n);return e.observe(null===Q||void 0===Q?void 0:Q.current),function(){e.disconnect()}}),[]);var W=function(){var n=(0,x.Z)((0,p.Z)().mark((function n(e){var o,r;return(0,p.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={profileId:e.postId,reelId:e._id,text:"".concat(U.username," liked your reel")},n.prev=1,n.next=4,y.b.put("/posts/like/"+e._id,{userId:U._id},{headers:{token:"Bearer "+U.accessToken}});case 4:if(!K||e.postId===(null===U||void 0===U?void 0:U._id)){n.next=8;break}return null===l||void 0===l||null===(r=l.current)||void 0===r||r.emit("postLiked",o),n.next=8,y.b.post("/noti/create",{notificationId:e.reelId,message:o},{headers:{token:"Bearer "+U.accessToken}});case 8:t(!i),J(!1),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e){return n.apply(this,arguments)}}();return(0,j.useEffect)((function(){A(o.likes)}),[o]),(0,j.useEffect)((function(){H&&W(o)}),[H]),(0,M.jsxs)(S,{darkMode:N,children:[(0,M.jsx)(F,{onClick:function(){return c(!r)},children:r?(0,M.jsx)(P.Z,{htmlColor:"white"}):(0,M.jsx)(I.Z,{htmlColor:"white"})}),(0,M.jsx)(_,{onClick:function(){s(v),d(!0)},muted:r,ref:Q,loop:!0,darkMode:N,src:o.video}),(0,M.jsxs)(E,{darkMode:N,children:[(0,M.jsxs)(O,{children:[K?(0,M.jsx)(Z.Z,{htmlColor:"crimson",onClick:function(){A(q.filter((function(n){return n!==(null===U||void 0===U?void 0:U._id)}))),J(!0)}}):(0,M.jsx)(m.Z,{htmlColor:"white",onClick:function(){A((function(n){return[].concat((0,u.Z)(n),[null===U||void 0===U?void 0:U._id])})),J(!0)}}),(0,M.jsx)("span",{children:q.length})]}),(0,M.jsxs)(O,{children:[(0,M.jsx)("img",{src:w.Z,alt:"",onClick:function(){a(!0),s(v),d(!0)}}),(0,M.jsxs)("span",{onClick:function(){s(v),d(!0),a(!0)},children:[" ",null===(e=o.comments)||void 0===e?void 0:e.length," "]})]}),(0,M.jsxs)(O,{children:[" ",(0,M.jsx)("img",{src:g.Z,alt:""})]}),(0,M.jsxs)(O,{children:["  ",(0,M.jsx)("img",{src:b.Z,alt:""})]}),(0,M.jsx)(O,{children:(0,M.jsx)(z.Z,{htmlColor:"white"})})]}),(0,M.jsxs)(R,{children:[(0,M.jsx)(k.F,{to:"/account/?user=".concat(o.reelId),children:(0,M.jsxs)(B,{children:[(0,M.jsx)(f.Z,{src:o.profilePic}),(0,M.jsxs)("span",{style:{color:"white"},children:[o.username," "]})]})}),(0,M.jsx)("span",{style:{color:"#f6f5f7",fontSize:"14px"},children:o.caption})]})]})};var S=v.ZP.div(i||(i=(0,l.Z)(["\n    display: flex;\n    width: 27vw;\n    min-height: 79vh;\n   \n    scroll-snap-align: start;\n    \n   position: relative;\n   box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n    border-radius: 10px;\n    \n    margin-inline: auto;\n    align-items: start;\n    background-color: black;\n    &:hover{\n      &>button{\n        opacity: 1;\n      }\n    }\n    @media screen and (max-width:768px){\n        width: 100vw;\n        min-height: 93vh;\n        border: none;\n        border-radius: 0;\n       \n    }\n"]))),E=v.ZP.div(o||(o=(0,l.Z)(["\n    display: flex;\n    flex-direction: column;\n   align-items: center;\n   gap: 15px;\n   position: absolute;\n   right: 0;\n   padding: 10px;\n   bottom: 8px;\n   z-index: 2;\n   color:'white';\n   @media screen and (max-width:768px){\n        padding: 0 15px;\n        bottom: 40px;\n        \n    }\n   &>*{\n        cursor: pointer;\n    }\n"]))),O=v.ZP.span(r||(r=(0,l.Z)(["\n    display: flex;\n    flex-direction: column;\n   align-items: center;\n   gap: 3px;\n color: white;\n"]))),_=v.ZP.video(s||(s=(0,l.Z)(["\nbox-shadow: 2px 2px 4px 2px #f0efee;\nbox-shadow: ",";\n    border-radius: 10px;\n    width: 100%;\n   height: 100%;\npadding: 0;\nobject-fit: cover;\n@media screen and (max-width:768px){\n        border-radius: 0;\n        box-shadow: none;\n        \n    }\n"])),(function(n){return n.darkMode&&"-0.5px -0.5px 2px 1px #191919"})),F=v.ZP.button(c||(c=(0,l.Z)(["\n  position: absolute;\n  top: 15px;\n  right: 15px;\n  border:none;\n  background-color:transparent;\n  opacity:0;\n  transition: all 0.5s ease;\n  cursor: pointer;\n  z-index: 999;\n  @media screen and (max-width:768px){\n        opacity: 1;\n        \n    }\n"]))),B=v.ZP.div(d||(d=(0,l.Z)(["\n   display: flex;\n \n   gap: 8px;\n   font-size: 16px;\n   align-items: center;\n  \n   @media screen and (max-width:768px){\n       \n        gap: 8px;\n        font-size: 18px;\n    }\n"]))),R=v.ZP.div(a||(a=(0,l.Z)(["\n    display: flex;\n   gap: 8px;\n   flex-direction: column;\n  \n   position:absolute;\n   bottom: 18px;\n   \n   padding-left: 15px;\n   @media screen and (max-width:768px){\n       bottom: 40px;\n       padding-left: 18px;\n    }\n   \n"])))},3650:function(n,e,t){t.r(e),t.d(e,{Flex:function(){return b}});var i,o,r,s,c=t(168),d=t(4165),a=t(5861),l=t(9439),u=t(7317),p=t(6487),x=t(165),h=t(2791),f=t(3197),m=t(498),v=t(9720),Z=t(315),w=t(1087),g=t(184);e.default=function(n){var e=n.socket,t=(0,h.useState)(!1),i=(0,l.Z)(t,2),o=i[0],r=i[1],s=(0,h.useState)(!1),c=(0,l.Z)(s,2),p=c[0],w=c[1],C=(0,h.useState)(0),I=(0,l.Z)(C,2),P=I[0],z=I[1],M=(0,h.useState)(!1),S=(0,l.Z)(M,2),E=S[0],O=S[1],_=(0,h.useState)([]),F=(0,l.Z)(_,2),B=F[0],R=F[1],T=(0,h.useState)(!0),U=(0,l.Z)(T,2),L=U[0],V=U[1];return(0,h.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,d.Z)().mark((function n(){var e;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.b.get("/posts/all/reels");case 2:e=n.sent,R(e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[p]),(0,g.jsxs)(b,{children:[(0,g.jsx)(x.Z,{open:o,socket:e,setIndex:z,index:P,length:B.length,setOpen:r,selected:B[P],fetch:p,setFetch:w}),(0,g.jsx)(m.Z,{socket:e}),(0,g.jsxs)(k,{children:[(0,g.jsx)(y,{to:"/",children:(0,g.jsx)(u.Z,{htmlColor:"white",fontSize:"medium"})}),(0,g.jsx)(v.Z,{fetch:p,setFetch:w,setOpenComment:O,socket:e,openComment:E,selected:B[P]}),(0,g.jsx)(j,{id:"yourRootElement",children:B.map((function(n,t){return(0,g.jsx)(Z.Z,{setFetch:w,fetch:p,socket:e,setMuted:V,muted:L,id:"yourRootElement",setIndex:z,index:t,item:n,setOpen:r,setOpenComment:O},t)}))})]})]})};var b=p.ZP.div(i||(i=(0,c.Z)(["\ndisplay: flex;width: 100vw;\njustify-content: space-between;\nheight: max-content;\n"]))),k=p.ZP.div(o||(o=(0,c.Z)(["\n   \n    width: 84vw;\n    \n    display: flex;\n  \n    min-height: 100vh;\n    align-items: center;\n    justify-content: center;\n\n\n    @media screen and (max-width:768px){\n      width: 100vw;\n\n    }\n   \n"]))),j=p.ZP.div(r||(r=(0,c.Z)(["\n    width: 30vw;\n   height: 79vh;\n   overflow-y: scroll;\ndisplay: flex;\nflex-direction: column;\n   scroll-snap-type: y mandatory;\n  scroll-behavior: smooth;\n  scrollbar-width: none;\n  &::-webkit-scrollbar{\n    display: none;\n  }\n    \n    @media screen and (max-width:768px){\n       width: 100%;    \n       height: 93vh;\n    \n    };\n\n    \n"]))),y=(0,p.ZP)(w.rU)(s||(s=(0,c.Z)(["\n position: fixed;\n  top: 15px;\n  left: 15px;\n  background-color:transparent;\n  opacity:0;\n  cursor: pointer;\n  z-index: 999;\n  display: none;\n  @media screen and (max-width:768px){\n        opacity: 1;\n        display: block;\n    };\n"])))},2898:function(n,e,t){var i=t(4836);e.Z=void 0;var o=i(t(5649)),r=t(184),s=(0,o.default)((0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");e.Z=s}}]);
//# sourceMappingURL=650.cae38805.chunk.js.map